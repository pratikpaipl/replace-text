<!-- Item Cards-->
<!-- Matching FN and Matching FP Widgets -->
<!-- {{type}} {{pageFrom}} -->

<!-- Matching FN and Matching FP Widgets -->
<ion-row [class]="isMain?'cardlist permissions_crd main-card':'cardlist permissions_crd item_card_enabler'"  *ngIf="((type =='fundraise-needs-submitted' || type == 'enablers' || type=='matching-enablers' ||  type=='funding-profiles-submitted' || type == 'fundraise-view' || type=='matching-enablers' || type == 'enabler-view'|| type =='funding-profile-view' || (type =='funding-profiles' && store.appType =='admin') || (type =='fundraise' && store.appType =='admin') || pageFrom =='funding-profile-submissions' || from =='profile') && type !='matched-fundraise-needs' && type !='matching-funding-profiles')">
   
    
    <ion-col class="cardlist_content_block" style="padding: 0px;">
        <div class="cardlist_content_box" style="padding: 0px;" *ngIf="(type == 'enablers' || type == 'enabler-view') && (pageFrom == 'list' || pageFrom == 'Top'|| pageFrom == 'details')">
            <div *ngIf="prod.EnablerCoverPhoto != null && prod.EnablerCoverPhoto!='' && pageFrom == 'Top'" class="cover-photo">
                <img [longdesc]="prod.EnablerCoverPhoto" alt="" src="{{ prod.EnablerCoverPhoto }}" />
            </div>
         
            <div *ngIf="extraTitle">
                <ion-row style="border-bottom: 1px solid var(--ion-color-light-gray);">
                    <ion-col class="cardlist_content_block">
                        <div class="cardlist_content_box extraTitle">
                            <prod-title [pageType]="prod.ProfileSlug!=undefined?'funding-profiles':'fundraise'" [isAddForm]="isAddForm" [extraMenu]="extraMenu" from="profile" [openFront]="openFront" pageFrom="profile" [subType]="subtype" [prod]="cutomData(prod.ProfileSlug!=undefined?'profile':'fundraise')" [title]="prod.ProfileSlug!=undefined?prod.FundingProviderType+'('+store.getVal('investor')+')':prod.FundingType+'('+store.getVal('investment_raise')+')'" [itemTitle]="prod.ProfileSlug!=undefined?prod.FundingProviderType+'('+store.getVal('investor')+')':prod.FundingType+'('+store.getVal('investment_raise')+')'" [Slug]="prod.ProfileSlug != undefined?prod.ProfileSlug : prod.FundraiseSlug" [ActionType]="ActionType" [apiAction]="apiAction" [extraTitle]="extraTitle" hideAction="1"></prod-title>
                        </div>
                    </ion-col>

                </ion-row>               
            </div>
            <ion-row>
                <ion-col class="cardlist_images_box">
                    <div class="card_img" >
                            <img [alt]="prod.EnablerName +' '+prod.ShortDescription" [class]="pageFrom != 'Top'?'ion-img pointer':'ion-img no-pointer'" (click)="openEnabler()" src="{{ prod.EnablerLogo != null ? prod.EnablerLogo!=''?prod.EnablerLogo:'assets/images/no-image-icon-5.jpg' : 'assets/images/no-image-icon-5.jpg' }}" onerror="this.src='assets/images/no-image-icon-5.jpg'" />
                    </div>
                </ion-col>
                <ion-col class="cardlist_content_block" [style.border-radius]="pageFrom =='Top' && prod.EnablerCoverPhoto != null && prod.EnablerCoverPhoto!=''?'0px 10px 0px 10px':'0px'" [style.background]="pageFrom =='Top' && prod.EnablerCoverPhoto != null && prod.EnablerCoverPhoto!=''?'white':'transparent'">
                    <div class="cardlist_content_box pl-15">
                        <prod-title [pageType]="type" [isAddForm]="isAddForm" [extraMenu]="extraMenu" [from]="from" [openFront]="openFront" [pageFrom]="pageFrom" [subType]="subtype" [prod]="prod" [title]="prod.EnablerName" [itemTitle]="prod.EnablerName" [address]="address" [Name]="Name" [EnablerSlug]="EnablerSlug" [FP_EnablerSlug]="prod.FP_EnablerSlug != undefined?prod.FP_EnablerSlug:''" [FN_EnablerSlug]="prod.FN_EnablerSlug != undefined?prod.FN_EnablerSlug :''" [ActionType]="ActionType" [apiAction]="apiAction" (change)="callFilter($event)"></prod-title>
                        <ion-label class="sell-lbl brand_content" style="-webkit-line-clamp: 9 !important;">
                            <span>
                                <h3><a [href]="enablerPath()" [class]="pageFrom != 'Top'?'clickEv pointer three-line':'clickEv no-pointer'" (click)="openEnabler()" [innerHtml]="nl2br(prod.ShortDescription)" tabindex="-1"></a></h3>
                            </span>
                        </ion-label>
                        <ion-label class="sell-lbl brand_content" *ngIf="prod.FormattedAddress != undefined && prod.FormattedAddress != ''">
                            <span>
                                <i [class]="'fas fa-map-marker-alt'"></i> <a *ngIf="prod.AddressUrl != undefined" [href]="prod.AddressUrl" target="_blank" tabindex="-1">{{prod.FormattedAddress}}</a>{{prod.AddressUrl == undefined ?prod.FormattedAddress:''}} 
                            </span>
                        </ion-label>
                    </div>
                    
                </ion-col>
                
            </ion-row>
            <ion-row>
                <ion-col id="web-ui" *ngIf="!isAddForm && ((prod.IsMyEnabler != undefined && prod.IsMyEnabler == '1') || (prod.TotalMatched>0 || prod.TotalFundraise > 0 || prod.TotalFundingProfile > 0 || prod.TotalSubmittedFundingProfiles > 0 || prod.TotalSubmittedFundraiseNeeds > 0 || from == 'admin' || from == 'profile' || (((prod.FPSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') &&  store.checkPermission(prod,'submit_funding_profile') || ((prod.FNSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') && store.checkPermission(prod,'submit_fundraise_need'))))" [style.border-top]="(prod.IsMyEnabler != undefined && prod.IsMyEnabler == '1') || (prod.TotalMatched>0 || prod.TotalFundraise > 0 || prod.TotalFundingProfile > 0 || prod.TotalSubmittedFundingProfiles > 0 || prod.TotalSubmittedFundraiseNeeds > 0 || from == 'admin' || from == 'profile' || (((prod.FPSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') &&  store.checkPermission(prod,'submit_funding_profile') || ((prod.FNSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') && store.checkPermission(prod,'submit_fundraise_need')))?'1px solid var(--ion-color-itemcard-border)':'none'" 
                    class="pt-15">
                        <enabler-count [prod]="prod" [pageType]="type" [subtype]="'enablers'" [from]="from" [pageFrom]="pageFrom" [openFront]="openFront" [EnablerSlug]="EnablerSlug" [ProfileSlug]="ProfileSlug" [FundraiseSlug]="FundraiseSlug" [FPEnablerSlug]="" [apiAction]="apiAction" [ActionType]="ActionType" [hideAction]="hideAction" [isAddForm]="isAddForm" [extraMenu]="extraMenu" (change)="callAction($event)"></enabler-count>
                </ion-col>
                <ion-col id="app-ui" *ngIf="!isAddForm && ((prod.IsMyEnabler != undefined && prod.IsMyEnabler == '1') || ( prod.TotalMatched>0 || prod.TotalFundraise > 0 || prod.TotalFundingProfile > 0 || prod.TotalSubmittedFundingProfiles > 0 || prod.TotalSubmittedFundraiseNeeds > 0 || from == 'admin' ||from == 'profile'|| (((prod.FPSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') &&  store.checkPermission(prod,'submit_funding_profile') || ((prod.FNSubmissionAccept != 0 && store.appType =='front')||  store.appType =='admin') && store.checkPermission(prod,'submit_fundraise_need'))))" [style.border-top]="(prod.IsMyEnabler != undefined && prod.IsMyEnabler == '1') || ( prod.TotalMatched>0 || prod.TotalFundraise > 0 || prod.TotalFundingProfile > 0 || prod.TotalSubmittedFundingProfiles > 0 || prod.TotalSubmittedFundraiseNeeds > 0 || from == 'admin' ||from == 'profile'|| (((prod.FPSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') &&  store.checkPermission(prod,'submit_funding_profile') || ((prod.FNSubmissionAccept != 0 && store.appType =='front')||  store.appType =='admin') && store.checkPermission(prod,'submit_fundraise_need')))?'1px solid var(--ion-color-itemcard-border)':'none'" [class]="(prod.IsMyEnabler != undefined && prod.IsMyEnabler == '1') || (prod.TotalMatched>0 ||prod.TotalFundraise > 0 || prod.TotalFundingProfile > 0 || prod.TotalSubmittedFundingProfiles > 0 || prod.TotalSubmittedFundraiseNeeds > 0|| from == 'admin' ||from == 'profile'|| (((prod.FPSubmissionAccept != 0 && store.appType =='front') ||  store.appType =='admin') &&  store.checkPermission(prod,'submit_funding_profile') || ((prod.FNSubmissionAccept != 0 && store.appType =='front')||  store.appType =='admin') && store.checkPermission(prod,'submit_fundraise_need')))?'cardlist_filter_content':'cardlist_filter_content p-0'">
                    <enabler-count [prod]="prod" [pageType]="type" [subtype]="'enablers'" [from]="from" [pageFrom]="pageFrom" [openFront]="openFront" [EnablerSlug]="EnablerSlug" [ProfileSlug]="ProfileSlug" [FundraiseSlug]="FundraiseSlug" [FPEnablerSlug]="" [apiAction]="apiAction" [ActionType]="ActionType" [hideAction]="hideAction" [isAddForm]="isAddForm" (change)="callAction($event)"></enabler-count>
                </ion-col>
            </ion-row>
        </div>
        <div class="cardlist_content_box1" style="padding: 0px;" *ngIf="(type == 'enabler-view' ) && from == 'admin' && (pageFrom == 'details')">
            <ion-row [style.background]="(type == 'enabler-view')?'var(--ion-color-white)':'#e9e9e9a8'" style="border-radius: 10px;">
                <ion-col class="cardlist_content_block">
                    <div class="cardlist_content_box">
                        <prod-title [pageType]="type" [isAddForm]="isAddForm" [extraMenu]="extraMenu" [from]="from" [openFront]="openFront" [pageFrom]="pageFrom" [subType]="subtype" [prod]="prod" [title]="prod.EnablerName" [itemTitle]="prod.EnablerName" [address]="address" [Name]="Name" [ActionType]="ActionType" [EnablerSlug]="prod.EnablerSlug !=undefined?prod.EnablerSlug:EnablerSlug!=undefined?EnablerSlug:''" [FP_EnablerSlug]="prod.FP_EnablerSlug != undefined?prod.FP_EnablerSlug:''" [FN_EnablerSlug]="prod.FN_EnablerSlug != undefined?prod.FN_EnablerSlug :''" [apiAction]="apiAction"></prod-title>
                    </div>
                    <div [style.border-top]="(prod.TotalExpressedInterest > 0 || prod.TotalReceivedInterest>0)?'1px solid var(--ion-color-light-gray)':'none'" [class]="(prod.TotalExpressedInterest > 0 || prod.TotalReceivedInterest>0)?'cardlist_filter_content':'cardlist_filter_content p-0'">
                        <div class="filter_count_list">
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('matching_fundraise_needs')}}
                                    <span class="count">{{prod.TotalMatchingFundingProfiles}}</span>
                                </span>
                            </ion-label>
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('expressed_interest')}}
                                    <span class="count">{{prod.TotalExpressedInterest}}</span>
                                </span>
                            </ion-label>
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('received_interest')}}
                                    <span class="count">{{prod.TotalReceivedInterest}}</span>
                                </span>
                            </ion-label>
                        </div>
                    </div>
                </ion-col>
            </ion-row>
            <ion-row style="background: white;border-radius: 10px;" *ngFor="let item of FundraiseData">
                <ion-col class="cardlist_content_block">
                    <div class="cardlist_content_box2">
                        <prod-title [pageType]="'fundraise'" [isAddForm]="isAddForm" [extraMenu]="extraMenu" [from]="from" [openFront]="openFront" [pageFrom]="pageFrom" [subType]="subtype" [prod]="item" [title]="(item?.ReferenceCode != undefined && item?.ReferenceCode != ''?item?.ReferenceCode :'') + (item?.CompanyName != undefined && item?.CompanyName != ''?' | '+item?.CompanyName :'')+ (item?.ProfileName != undefined && item?.ProfileName != ''?' | '+item?.ProfileName :'')+(item?.CountryName != undefined && item?.CountryName != ''?' | '+ item?.CountryName:'')" [itemTitle]="(item?.ReferenceCode != undefined && item?.ReferenceCode != ''?item?.ReferenceCode :'') + (item?.CompanyName != undefined && item?.CompanyName != ''?' | '+item?.CompanyName :'')+ (item?.ProfileName != undefined && item?.ProfileName != ''?' | '+item?.ProfileName :'')+(item?.CountryName != undefined && item?.CountryName != ''?' | '+ item?.CountryName:'')" [address]="''" [Name]="Name" [EnablerSlug]="''" [FP_EnablerSlug]="prod.FP_EnablerSlug != undefined?prod.FP_EnablerSlug:''" [FN_EnablerSlug]="prod.FN_EnablerSlug != undefined?prod.FN_EnablerSlug :''" [ActionType]="ActionType" [apiAction]="apiAction"></prod-title>
                        <ion-label class="sell-lbl brand_content" [style.margin-bottom]="pageFrom == 'Top'?'12px !important':'0px !important'" *ngIf="prod.FirstName != undefined">
                            <h3>
                                <div class="card_title">
                                    <b>{{this.store.getVal('contact')}}</b>&nbsp;<span>{{prod.FirstName}} {{prod.LastName}}<a *ngIf="prod.Email !=undefined" href="mailto:{{prod.Email}}" tabindex="-1"> | {{prod.Email}}</a></span>
                                </div>
                            </h3>
                        </ion-label>
                    </div>
                    <div class="cardlist_filter_content btn_view" [style.border-top]="'1px solid var(--ion-color-light-gray)'">
                        <div class="filter_count_list">
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('matching_funding_profiles')}}
                                    <span class="count">{{store.format(undefined,item?.TotalMatchingFundingProfiles)}}</span>
                                </span>
                            </ion-label>
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('total_expressed_interest')}}
                                    <span class="count">{{item?.TotalExpressedInterest}}</span>
                                </span>
                            </ion-label>
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('total_received_interest')}}
                                    <span class="count">{{item?.TotalReceivedInterest}}</span>
                                </span>
                            </ion-label>
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('received_interest')}} <span class="count">
                                        <drop-down from="status" [itemList]="store.valueList" [enable]="(!store.IsSystemAdmin)" [preSlected]="'0'" [slected]="'0'" customClass="show-drop" (change)="selectStatus($event)" [pageType]="type"></drop-down>
                                    </span>
                                </span>
                            </ion-label>
                            <ion-label class="sell-lbl brand_content">
                                <span class="contents no-pointer">
                                    {{store.getVal('expressed_interest')}} <span class="count">
                                        <drop-down from="status" [itemList]="store.valueList"
                                            [enable]="!store.IsSystemAdmin" [preSlected]="'1'" [slected]="'1'"
                                            customClass="show-drop" (change)="selectStatus($event)" [pageType]="type">
                                        </drop-down>
                                    </span>
                                </span>
                            </ion-label>
                        </div>
                        <ion-button class="btn-match" (click)="openMatching(item,true)">{{store.getVal('see_matching_parameters')}}</ion-button>
                    </div>
                </ion-col>
            </ion-row>
        </div>
        
    </ion-col>
</ion-row>

<!-- Item Cards-->